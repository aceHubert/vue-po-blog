(window["webpackJsonpVueUieditor"]=window["webpackJsonpVueUieditor"]||[]).push([["vue_uieditor_cp"],{"023c":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.current?i("div",{staticClass:"vue-uieditor"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.isDesign,expression:"isDesign"}],staticClass:"editor-json-content",style:{overflow:t.current.caclSize?"":"hidden"}},[i("input",{ref:"jsonFoucs",staticClass:"editor-json-focus"}),t.current.json&&t.isDesign?i("vue-uieditor-render",{attrs:{options:t.optionEx,json:t.current.json,mixin:t.current.mixin,editing:""}}):t._e()],1),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isPreview,expression:"isPreview"}],staticClass:"editor-priview-content",style:{overflow:t.current.caclSize?"":"hidden"}},[t.isPreview?i("vue-uieditor-render",{attrs:{options:t.optionEx,json:t.current.monacoEditor.content,preview:""}}):t._e()],1),i("div",{staticClass:"layui-uieditor"},[i("div",{staticClass:"layui-tab layui-tab-card"},[t.isDesign?i("div",{staticClass:"tool-bar"},[i("div",{staticClass:"layui-btn-group"},[t._l(t.toolbar,(function(e,n){return i("button",{directives:[{name:"show",rawName:"v-show",value:e.showEx,expression:"item.showEx"}],staticClass:"layui-btn layui-btn-primary layui-btn-sm",class:{"layui-disabled":e.disabledEx,divided:e.divided},attrs:{type:"button","layui-tip":e.title,"layui-tip-direction":"3"},on:{click:function(i){return t.toolbarClick(i,e)}}},[e.icon?i("i",{class:e.icon}):i("span",[t._v(t._s(e.title))])])})),i("button",{staticClass:"layui-btn layui-btn-primary layui-btn-sm",class:{divided:t.hasToolbar},attrs:{type:"button","layui-tip":"清空","layui-tip-direction":"3"},on:{click:function(e){return t.service.empty()}}},[i("i",{staticClass:"layui-icon layui-icon-file-b"})]),i("button",{staticClass:"layui-btn layui-btn-primary layui-btn-sm",attrs:{type:"button","layui-tip":"刷新","layui-tip-direction":"3"},on:{click:function(e){return t.service.refresh()}}},[i("i",{staticClass:"layui-icon layui-icon-refresh"})]),i("button",{staticClass:"layui-btn layui-btn-primary layui-btn-sm",class:{"layui-disabled":!t.history.canPre},attrs:{type:"button","layui-tip":"撤销","layui-tip-direction":"3"},on:{click:function(e){return t.history.pre()}}},[i("i",{staticClass:"layui-icon layui-icon-left"})]),i("button",{staticClass:"layui-btn layui-btn-primary layui-btn-sm",class:{"layui-disabled":!t.history.canNext},attrs:{type:"button","layui-tip":"恢复","layui-tip-direction":"3"},on:{click:function(e){return t.history.next()}}},[i("i",{staticClass:"layui-icon layui-icon-right"})]),i("button",{staticClass:"layui-btn layui-btn-primary layui-btn-sm",class:{"layui-disabled":!t.current.id||!t.service.canRemove(t.current.id)},attrs:{type:"button","layui-tip":"删除","layui-tip-direction":"3"},on:{click:function(e){return t.service.delCur()}}},[i("i",{staticClass:"layui-icon layui-icon-delete"})]),i("button",{staticClass:"layui-btn layui-btn-primary layui-btn-sm divided",class:{"ue-active":t.leftBar.show},attrs:{type:"button","layui-tip":"显示/隐藏左边组件栏","layui-tip-direction":"3"},on:{click:function(e){t.leftBar.show=!t.leftBar.show}}},[i("i",{staticClass:"layui-icon layui-icon-app"})]),i("button",{staticClass:"layui-btn layui-btn-primary layui-btn-sm",class:{"ue-active":t.rightBar.show},attrs:{type:"button","layui-tip":"显示/隐藏右边属性栏","layui-tip-direction":"3"},on:{click:function(e){t.rightBar.show=!t.rightBar.show}}},[i("i",{staticClass:"layui-icon layui-icon-slider"})]),i("button",{staticClass:"layui-btn layui-btn-primary layui-btn-sm divided",attrs:{type:"button","layui-tip":"关于","layui-tip-direction":"3"},on:{click:function(e){return t.about()}}},[i("i",{staticClass:"layui-icon layui-icon-about"})])],2)]):t._e(),["script","json","tmpl"].indexOf(t.current.mode)>=0&&!t.current.monacoEditorOther.show?i("div",{staticClass:"tool-bar"},[i("div",{staticClass:"layui-btn-group"},[i("button",{staticClass:"layui-btn layui-btn-primary layui-btn-sm",attrs:{type:"button","layui-tip":"格式化","layui-tip-direction":"3"},on:{click:function(e){return t.$refs.modeMonacoEditor.formatCode()}}},[i("i",{staticClass:"layui-icon layui-icon-align-left"})]),i("button",{staticClass:"layui-btn layui-btn-primary layui-btn-sm divided",attrs:{type:"button","layui-tip":"应用","layui-tip-direction":"3"},on:{click:function(e){return t.current.monacoEditor.save()}}},[i("i",{staticClass:"layui-icon layui-icon-ok"})])])]):t._e(),t.current.monacoEditorOther.show?i("div",{staticClass:"tool-bar"},[i("div",{staticClass:"layui-btn-group"},[i("button",{staticClass:"layui-btn layui-btn-primary layui-btn-sm",attrs:{type:"button","layui-tip":"格式化","layui-tip-direction":"3"},on:{click:function(e){return t.$refs.monacoEditorOther.formatCode()}}},[i("i",{staticClass:"layui-icon layui-icon-align-left"})]),i("button",{staticClass:"layui-btn layui-btn-primary layui-btn-sm divided",attrs:{type:"button","layui-tip":"应用","layui-tip-direction":"3"},on:{click:function(e){return t.current.monacoEditorOther.save()}}},[i("i",{staticClass:"layui-icon layui-icon-ok"})]),i("button",{staticClass:"layui-btn layui-btn-primary layui-btn-sm",attrs:{type:"button","layui-tip":"取消","layui-tip-direction":"3"},on:{click:function(e){return t.current.monacoEditorOther.close()}}},[i("i",{staticClass:"layui-icon layui-icon-close"})])])]):t._e(),t.isPreview?i("div",{staticClass:"tool-bar"},[i("div",{staticClass:"layui-btn-group"},[i("button",{staticClass:"layui-btn layui-btn-primary layui-btn-sm",attrs:{type:"button","layui-tip":"设置模拟参数","layui-tip-direction":"3"},on:{click:function(e){return t.service.showPreviewOpt()}}},[i("i",{staticClass:"layui-icon layui-icon-set-fill"})])])]):t._e(),i("ul",{staticClass:"layui-tab-title uieditor-mode-title"},[i("li",{staticClass:"layui-tab-first layui-this",attrs:{design:""},on:{click:function(e){return t.service.setMode("design")}}},[t._v("\n          设计\n        ")]),t.hasMode("script")?i("li",{attrs:{script:""},on:{click:function(e){return t.service.setMode("script")}}},[t._v("\n          代码\n        ")]):t._e(),t.hasMode("tmpl")?i("li",{attrs:{tmpl:""},on:{click:function(e){return t.service.setMode("tmpl")}}},[t._v("\n          Tmpl\n        ")]):t._e(),t.hasMode("json")?i("li",{attrs:{json:""},on:{click:function(e){return t.service.setMode("json")}}},[t._v("\n          JSON\n        ")]):t._e(),i("li",{attrs:{preview:""},on:{click:function(e){return t.service.setMode("preview")}}},[t._v("预览")]),i("li",{staticStyle:{display:"none"},attrs:{other:""},on:{click:function(e){return t.service.setMode("other")}}},[t._v("\n          其他\n        ")])]),i("div",{staticClass:"layui-tab-content"},[i("div",{staticClass:"layui-tab-item layui-show"},[i("div",{staticClass:"editor-pane",class:{"left-hide":!t.leftBar.show,"right-hide":!t.rightBar.show}},[t.leftBar.show?i("div",{staticClass:"left"},[i("div",{staticClass:"left-content"},[i("uieditor-cp-tree")],1)]):t._e(),i("div",{staticClass:"center"},[i("div",{staticClass:"center-content"},[i("div",{staticClass:"editor-content"},[t.current?i("div",{staticClass:"center-breadcrumb"},t._l(t.current.breadcrumbs,(function(e,n){return i("span",{key:n},[e.canOpt?i("a",{staticClass:"center-breadcrumb-item link",on:{click:function(i){return t.service.setCurrent(e.id)}}},[t._v("\n                        "+t._s(e.text)+"\n                      ")]):i("span",{staticClass:"center-breadcrumb-item"},[t._v("\n                        "+t._s(e.text)+"\n                      ")]),e.isLast?t._e():i("span",{staticClass:"center-breadcrumb-item-separator"},[t._v(">")])])})),0):t._e(),t._m(0)])])]),t.rightBar.show?i("div",{staticClass:"right"},[i("div",{staticClass:"right-content"},[!t.current.refreshAttr&&t.current.attrs?i("uieditor-cp-attr"):t._e()],1)]):t._e()])]),t.hasMode("script")?i("div",{staticClass:"layui-tab-item"},[i("div",{staticClass:"layui-tab-codeeditor"},["script"==t.current.mode?i("uieditor-monaco-editor",{ref:"modeMonacoEditor",attrs:{extraLib:t.current.monacoEditor.extraLib,"format-auto":t.current.monacoEditor.formatAuto,language:t.current.monacoEditor.language},model:{value:t.current.monacoEditor.content,callback:function(e){t.$set(t.current.monacoEditor,"content",e)},expression:"current.monacoEditor.content"}}):t._e()],1)]):t._e(),t.hasMode("tmpl")?i("div",{staticClass:"layui-tab-item"},[i("div",{staticClass:"layui-tab-codeeditor"},["tmpl"==t.current.mode?i("uieditor-monaco-editor",{ref:"modeMonacoEditor",attrs:{extraLib:t.current.monacoEditor.extraLib,"format-auto":t.current.monacoEditor.formatAuto,language:t.current.monacoEditor.language},model:{value:t.current.monacoEditor.content,callback:function(e){t.$set(t.current.monacoEditor,"content",e)},expression:"current.monacoEditor.content"}}):t._e()],1)]):t._e(),t.hasMode("json")?i("div",{staticClass:"layui-tab-item"},[i("div",{staticClass:"layui-tab-codeeditor"},["json"==t.current.mode?i("uieditor-monaco-editor",{ref:"modeMonacoEditor",attrs:{extraLib:t.current.monacoEditor.extraLib,"format-auto":t.current.monacoEditor.formatAuto,language:t.current.monacoEditor.language},model:{value:t.current.monacoEditor.content,callback:function(e){t.$set(t.current.monacoEditor,"content",e)},expression:"current.monacoEditor.content"}}):t._e()],1)]):t._e(),t._m(1),i("div",{staticClass:"layui-tab-item"},[i("div",{staticClass:"layui-tab-codeeditor"},[t.current.monacoEditorOther.show?i("uieditor-monaco-editor",{ref:"monacoEditorOther",attrs:{extraLib:t.current.monacoEditorOther.extraLib,"format-auto":t.current.monacoEditorOther.formatAuto,language:t.current.monacoEditorOther.language},model:{value:t.current.monacoEditorOther.content,callback:function(e){t.$set(t.current.monacoEditorOther,"content",e)},expression:"current.monacoEditorOther.content"}}):t._e()],1)])])])])]):t._e()},r=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"editor-json-content-in"},[i("div")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"layui-tab-item"},[i("div",{staticClass:"editor-priview-content-in"})])}],o=i("9ab4"),a=i("60bb"),s=i.n(a),c=i("0db9"),l=i("532a"),u=i("0c90"),d=i("7fb3"),p=i("42c9"),f=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isEmpty?t._e():i("div",{staticClass:"layui-tab layui-tab-brief editor-pane-tab",attrs:{"lay-filter":"docDemoTabBrief"}},[i("ul",{staticClass:"layui-tab-title"},[i("li",{staticClass:"layui-this",on:{click:function(e){return t.setTab(0)}}},[t._v("属性")]),i("li",{on:{click:function(e){return t.setTab(1)}}},[t._v("事件")]),i("li",{on:{click:function(e){return t.setTab(2)}}},[t._v("Vue")]),t.hasHttp?i("li",{on:{click:function(e){return t.setTab(3)}}},[t._v("数据源")]):t._e()]),i("div",{staticClass:"layui-tab-content"},[i("div",{staticClass:"layui-tab-item layui-show"},[i("div",{ref:"attrContent",staticClass:"layui-collapse editor-pane-collapse",attrs:{"lay-filter":"attrcollapse"}})]),i("div",{staticClass:"layui-tab-item"},[i("div",{ref:"eventContent",staticClass:"layui-collapse editor-pane-collapse",attrs:{"lay-filter":"eventcollapse"}})]),i("div",{staticClass:"layui-tab-item"},[i("div",{ref:"vueContent",staticClass:"layui-collapse editor-pane-collapse",attrs:{"lay-filter":"vuecollapse"}})]),i("div",{staticClass:"layui-tab-item"},[i("div",{ref:"dsContent",staticClass:"layui-collapse editor-pane-collapse",attrs:{"lay-filter":"dscollapse"}})])])])},v=[],y=i("5670"),b=i("25ec"),h=i("3ede"),m="_ue_cust_attr_add_";function g(t){return t&&t.replace(/[A-Z]/g,(function(t){return"-"+t.toLowerCase()})).replace(/^\-/,"")}function j(t){return t&&t.replace(/\-([a-z])/gi,(function(t,e){return e.toUpperCase()}))}function O(t){return t=j(t),t&&t.replace(/^([a-z])/i,(function(t,e){return e.toLowerCase()}))}function _(t){return t=j(t),t&&t.replace(/^([a-z])/i,(function(t,e){return e.toUpperCase()}))}var C=/^\s*v\-.*/,w=layui.$;function x(t){var e=[];return s.a.forEach(s.a.groupBy(t,"group"),(function(t,i){t=s.a.orderBy(t,"order","asc");var n=s.a.first(t),r={group:i,order:n.groupOrder,value:n,items:t};e.push(r)})),e=s.a.orderBy(e,"order","asc"),e}var k=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isEmpty=!1,e.hasHttp=!1,e._noneAttrs=[],e.formName="attrform-"+l["a"].makeAutoId(),e}return Object(o["d"])(e,t),e.prototype.setTab=function(t){this.service["_attr_tabcurindex_"]=t},e.prototype._c1=function(){var t=this.service.current;this.hasHttp=s.a.size(t.dsMethods)>0,this.renderId=t.id,this.isEmpty=0==s.a.size(t.attrs),this.isEmpty},e.prototype._m1=function(){return Object(o["b"])(this,void 0,void 0,(function(){return Object(o["e"])(this,(function(t){switch(t.label){case 0:return this.isEmpty?[2]:(this._attrs=s.a.cloneDeep(this.service.current.attrs),[4,this._makeCustAttrList()]);case 1:return t.sent(),this._initEvent(),this._makeAttrs(),[2]}}))}))},e.prototype._getCpDef=function(){return Object(o["b"])(this,void 0,void 0,(function(){var t,e,i,n,r,a;return Object(o["e"])(this,(function(o){switch(o.label){case 0:return t=this.service.getCurRender(),e=t.editor.name,e?(i=this.$components,n=i[e],n||(r=O(e),n=i[r],n||(r=_(r),n=i[r]),n||s.a.forEach(i,(function(t){if(t.name==e)return n=t,!1}))),a=p["c"].getCpDef(n,e),a.asyncCp?[3,1]:[2,a]):[3,3];case 1:return[4,a.asyncCp()];case 2:return[2,o.sent()];case 3:return[2]}}))}))},e.prototype._makeCustAttrList=function(){return Object(o["b"])(this,void 0,void 0,(function(){var t,e,i,n;return Object(o["e"])(this,(function(r){switch(r.label){case 0:return[4,this._getCpDef()];case 1:return t=r.sent(),e=t.props,s.a.size(e)>0&&(i=[],n=this._attrs,s.a.forEach(e,(function(t){var e=t.name;n[e]||n[g(e)]||n[O(e)]||(e=g(e),i.push({value:e,text:e}))})),this._noneAttrs=i),[2]}}))}))},e.prototype._d1=function(){layui.off("select","form"),b["a"].destroy(this.$el)},e.prototype.refresh=function(){return Object(o["b"])(this,void 0,void 0,(function(){var t;return Object(o["e"])(this,(function(e){switch(e.label){case 0:return layui.off("select","form"),t=this.service.current,this.isEmpty=0==s.a.size(t.attrs),this._attrs=s.a.cloneDeep(this.service.current.attrs),[4,this._makeCustAttrList()];case 1:return e.sent(),this._makeAttrs(),[2]}}))}))},e.prototype._makeAttrs=function(){var t,e,i,n=this;if(!this.isEmpty){var r=this._attrs,a=[],c=[],l=[],u=[],d=[],p=[],f={},v=this.service,y=((null===(i=this.theme)||void 0===i?void 0:i.rightBar)||{}).filter;s.a.forEach(r,(function(t,e){if(!s.a.isBoolean(t)&&!1!==t.show&&(!y||y({item:t,all:r,service:v}))){if("datasource-method"==t.name&&(t.datas=s.a.cloneDeep(n.service.current.dsMethods||[])),s.a.size(t.datas)>0){var i=[];s.a.forEach(t.datas,(function(t){t&&i.push(s.a.isString(t)?{text:t,value:t}:t)})),t.datas=i}f[e]=t.value,t["isPrefxV"]=C.test(e),t.datasource?p.push(t):t.event?t.cust?u.push(t):l.push(t):t.vue?d.push(t):t.cust?c.push(t):a.push(t)}})),this._model=f;var b=x(a),h="isAddBtn";b.push({group:"自定义属性",order:999,value:{},items:Object(o["g"])(s.a.orderBy(c,"name","asc"),[(t={},t[h]=!0,t.value="",t.name=m,t.text="添加属性",t.placeholder="属性名称",t.order=999,t.codeBtn=!1,t.enabledBind=!1,t)])});var g=this._makeFormDom(b);w(this.$refs.attrContent).html(g);var j=x(l);j.push({group:"自定义事件",order:999,value:{},items:Object(o["g"])(s.a.orderBy(u,"name","asc"),[(e={},e[h]=!0,e.value="",e.name="_ue_cust_event_add_",e.text="添加事件",e.placeholder="事件名称",e.order=999,e.codeBtn=!1,e.enabledBind=!1,e)])}),g=this._makeFormDom(j),w(this.$refs.eventContent).html(g);var O=x(d);g=this._makeFormDom(O),w(this.$refs.vueContent).html(g);var _=x(p);g=this._makeFormDom(_),w(this.$refs.dsContent).html(g),this._renderDom()}},e.prototype._makeFormItemDom=function(t){var e=this,i=[],n=0,r=!0,o=s.a.last(t.items);return s.a.forEach(t.items,(function(t,a){var c=t==o,l=t.row||c&&r,u=l?"12":"6";n++;var d=t.key||t.name,p=t.enabledBind||t.bind||"boolean-only"!=t.type&&t["isPrefxV"]||t.event?" attr-bind":"",f=t.enabledBind?t.bind?" layui-bg-blue-active":"layui-bg-blue":t["isPrefxV"]||t.event||t.bind?" layui-bg-gray":"",v=p?'<span name="'+d+'" class="layui-badge '+f+'">\n      '+(t.event?"@":t["isPrefxV"]?"v":":")+"\n      </span>":"",y=t.desc?'<i name="'+d+'" layui-tip="'+h["a"].escape(t.desc)+'" layui-tip-direction="4"  class="layui-icon layui-icon-about"></i>':"",b=!1!==t.codeBtn?" attr-code":"",g=!1!==t.codeBtn?'<i ue-attr-codebtn name="'+d+'" class="layui-icon layui-icon-form"></i>':"",j=l&&!r?"</div></div>":"",O=t["isAddBtn"],_=l||1==n?'<div class="layui-form-item'+(O?" uieditor-add-item":"")+'">\n      <div class="layui-row layui-col-space4">':"",C=l||2==n?"</div></div>":"";r=!!C;var w,x="";if(O){var k=d==m&&s.a.size(e._noneAttrs)>0?'<div ue-selectInput name="'+d+'" ue-attr-addinput></div>':'<input\n        type="text"\n        name="'+d+'"\n        ue-attr-addinput\n        placeholder="'+(t.placeholder||"")+'"\n        autocomplete="off"\n        class="layui-input"\n      />';w=k+'\n      <div class="layui-btn-group">\n        <button\n          type="button"\n          ue-attr-addbtn\n          name="'+d+'"\n          class="layui-btn layui-btn-sm layui-btn-normal"\n        >\n          <i name="'+d+'" class="layui-icon">&#xe654;</i>\n        </button>\n      </div>'}else switch(t.type){case"slider-only":w='<div ue-slider name="'+d+'"></div>';break;case"slider":p?(x=t.bind?" attr-slider-bind":" attr-slider",w='<div ue-slider name="'+d+'"></div><input\n              type="text"\n              name="'+d+'"\n              autocomplete="off"\n              placeholder="'+(t.placeholder||"")+'"\n              class="layui-input"\n            />'):w='<div ue-slider name="'+d+'"></div>';break;case"select":case"boolean":w='<div ue-selectInput name="'+d+'"></div>';break;case"boolean-only":w='<input type="checkbox" '+(!0===e._model[d]?"checked ":"")+'name="'+d+'" lay-skin="switch" title="开关">';break;case"select-only":var E=t.datas,T=s.a.map(E,(function(t){return'<option value="'+t.value+'">'+t.text+"</option>"}));w='<select\n              name="'+d+'"\n            >\n              '+T.join("")+"\n            </select>";break;default:w='<input\n            type="text"\n            name="'+d+'"\n            autocomplete="off"\n            placeholder="'+(t.placeholder||"")+'"\n            class="layui-input"\n          />';break}var D=""+j+_+'\n        <div class="layui-col-xs'+u+'">\n          <label class="layui-form-label">\n            '+y+"\n            "+t.text+'\n          </label>\n          <div class="layui-input-block'+p+b+x+'">\n            '+v+"\n            "+w+"\n            "+g+"\n          </div>\n        </div>\n      "+C;r&&(n=0),i.push(D)})),r||i.push("</div></div>"),i.join("")},e.prototype._makeFormDom=function(t){var e=this,i=[];return s.a.forEach(t,(function(t,n){var r=(t.group||"").replace("___ue_event_","事件").replace("___ue_vue_","Vue"),o='<div class="layui-colla-item"><h2 class="layui-colla-title">\n      <span class="editor-pane-collapse-title">'+r+'</span>\n      <i class="layui-icon layui-colla-icon"></i>\n    </h2><div class="layui-colla-content layui-show"><form\n    class="layui-form layui-form-pane1 uieditor-form"\n    action=""\n    lay-filter="'+e.formName+'"\n  >'+e._makeFormItemDom(t)+"</form></div></div>";i.push(o)})),i.join("")},e.prototype._initEvent=function(){var t=w(this.$el),e=this,i=this.service["_attr_tabcurindex_"]||0;i>0&&t.find(".layui-tab-title").children().eq(i).trigger("click"),t.on("click",".layui-bg-blue,.layui-bg-blue-active",(function(t){var i=w(t.target),n=w(t.target).attr("name"),r=e._attrs[n],o=i.parent();if(i.hasClass("layui-bg-blue-active")){if(i.addClass("layui-bg-blue"),i.removeClass("layui-bg-blue-active"),o.hasClass("attr-slider-bind")){o.addClass("attr-slider"),o.removeClass("attr-slider-bind");var a=o.find(".layui-slider").data("ue_slider");a&&a.setValue(~~e._model[n])}r&&(r.bind=!1)}else i.addClass("layui-bg-blue-active"),i.removeClass("layui-bg-blue"),o.hasClass("attr-slider")&&(o.addClass("attr-slider-bind"),o.removeClass("attr-slider"),o.find('input[name="'+n+'"]').val(e._model[n])),r&&(r.bind=!0);e._changeAttr(n,!1)})),t.on("selectstart",".layui-bg-blue,.layui-bg-gray",(function(t){return t.stopPropagation(),t.preventDefault(),!1})),t.on("click",".layui-icon-about",(function(t){var i=w(t.target).attr("name"),n=e._attrs[i];n&&n.desc&&y["a"].msg(n.desc)})),t.on("click","[ue-attr-codebtn]",(function(t){var i=w(t.target).attr("name"),n=e._attrs[i];n&&e.service.showMonacoEditorOther({content:e._model[i],language:n.language||"javascript",save:function(t){var n;e._change(i,t),layui.form.val(this._formName,(n={},n[i]=t,n))}})}));var n=function(t){var i=w(t.target).attr("name"),n="_ue_cust_event_add_"===i,r=s.a.trim(w('input[name="'+i+'"]').val()||"");if(r){var o=e.service.addAttr(e.renderId,n?"@"+r:r);o&&e.refresh()}};t.on("keydown","[ue-attr-addinput]",(function(t){if(13==t.keyCode)return t.stopPropagation(),t.preventDefault(),n(t),!1})),t.on("click","[ue-attr-addbtn]",(function(t){n(t)}))},e.prototype._renderDom=function(){var t=this,e=this,i=w(this.$el),n=layui.form,r=layui.selectInput,o=layui.slider,a=this._model,c=this._attrs;n.render(),i.find('.layui-form[lay-filter="'+this.formName+'"]').change((function(e){var i=w(e.target);t._change(i.attr("name"),i.val())})),i.find("[ue-selectInput]").each((function(t,i){var n=w(i),o=n.attr("name"),a=c[o]||{},l=o==m?e._noneAttrs:a.datas;r.render({elem:n,data:s.a.map(l,(function(t){return{value:t.value,name:t.text}})),placeholder:a.placeholder||"",name:o,remoteSearch:!1})})),i.find("[ue-slider]").each((function(e,i){var n=w(i),r=n.attr("name"),a=c[r],l=a.typeOption;o.render(s.a.assign({min:1,max:24,value:a.value},l,{elem:w(i),name:r,change:function(e){t._changeAsync(r,e)}}))})),n.val(this.formName,a||{}),n.on("select",(function(e){var i=w(e.elem).attr("name");t._change(i,e.value)})),n.on("switch",(function(e){var i=w(e.elem).attr("name");t._change(i,e.elem.checked)}))},e.prototype._changeAsync=function(t,e){this._change(t,e)},e.prototype._change=function(t,e){s.a.set(this._model,t,e);var i=this._attrs[t];i&&(i.value=e,this.service.setAttr(this.renderId,i))},e.prototype._changeAttr=function(t,e){void 0===e&&(e=!0);var i=this._attrs[t];i&&this.service.setAttr(this.renderId,i,e)},Object(o["c"])([Object(p["g"])("service"),Object(o["f"])("design:type",d["a"])],e.prototype,"service",void 0),Object(o["c"])([Object(p["g"])("theme"),Object(o["f"])("design:type",Object)],e.prototype,"theme",void 0),Object(o["c"])([Object(p["h"])("created"),Object(o["f"])("design:type",Function),Object(o["f"])("design:paramtypes",[]),Object(o["f"])("design:returntype",void 0)],e.prototype,"_c1",null),Object(o["c"])([Object(p["h"])("mounted"),Object(o["f"])("design:type",Function),Object(o["f"])("design:paramtypes",[]),Object(o["f"])("design:returntype",Promise)],e.prototype,"_m1",null),Object(o["c"])([Object(p["h"])("destroyed"),Object(o["f"])("design:type",Function),Object(o["f"])("design:paramtypes",[]),Object(o["f"])("design:returntype",void 0)],e.prototype,"_d1",null),Object(o["c"])([Object(p["b"])((function(t){return s.a.debounce(t,50)})),Object(o["f"])("design:type",Function),Object(o["f"])("design:paramtypes",[Object,Object]),Object(o["f"])("design:returntype",void 0)],e.prototype,"_changeAsync",null),e=Object(o["c"])([Object(p["d"])({})],e),e}(p["c"]),E=k,T=E,D=i("2877"),$=Object(D["a"])(T,f,v,!1,null,null,null),B=$.exports,S=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("form",{staticClass:"layui-form uieditor-searchform",attrs:{action:"","lay-filter":"first"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],staticClass:"layui-input",attrs:{type:"text",placeholder:"请输入搜索关键字",autocomplete:"off"},domProps:{value:t.searchText},on:{keydown:t.keydown,click:function(e){return t.removeSearchText()},input:function(e){e.target.composing||(t.searchText=e.target.value)}}}),i("i",{staticClass:"layui-icon",class:t.searchText?"layui-icon-close":"layui-icon-search",on:{click:function(e){return t.removeSearchText()}}})]),i("div",{staticClass:"layui-collapse editor-pane-collapse",attrs:{"lay-filter":"uieditor-cp-tree"}},[i("div",{staticClass:"layui-colla-item"},[t._m(0),i("div",{staticClass:"layui-colla-content layui-show"},[i("div",{ref:"tree1",staticClass:"uieditor-cp-tree"})])])])])},F=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("h2",{staticClass:"layui-colla-title"},[i("span",{staticClass:"editor-pane-collapse-title"},[t._v("组件 & 模板")]),i("i",{staticClass:"layui-icon layui-colla-icon"},[t._v("")])])}],A=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.searchText="",e.treeId="ue-cp-tree-"+l["a"].makeAutoId(),e}return Object(o["d"])(e,t),e.prototype._m1=function(){this._renderTree()},e.prototype._renderTree=function(){var t=this.service.components;this._cps=s.a.cloneDeep(t),this._tree=layui.tree.render({elem:this.$refs.tree1,data:this._cps.tree,showCheckbox:!1,accordion:!1,onlyIconControl:!1,isJump:!1,edit:!1,id:this.treeId})},e.prototype.search=function(){var t,e=this.searchText,i=layui.tree,n=this._cps;if(e){var r=new RegExp(s.a.escapeRegExp(e),"i");t=s.a.filter(n.list,(function(t){return!1!==t.item.show&&!1!==t.item.showInTree&&r.test(t.title)}))}else t=n.tree;i.reload(this.treeId,{data:t})},e.prototype.keydown=function(t){this.search()},e.prototype.removeSearchText=function(){this.searchText="",this.search()},e.prototype._d1=function(){var t;null===(t=this._tree)||void 0===t||t.destroy(),this._tree=null,b["a"].destroy(this.$el)},Object(o["c"])([Object(p["g"])("service"),Object(o["f"])("design:type",d["a"])],e.prototype,"service",void 0),Object(o["c"])([Object(p["g"])("theme"),Object(o["f"])("design:type",Object)],e.prototype,"theme",void 0),Object(o["c"])([Object(p["h"])("mounted"),Object(o["f"])("design:type",Function),Object(o["f"])("design:paramtypes",[]),Object(o["f"])("design:returntype",void 0)],e.prototype,"_m1",null),Object(o["c"])([Object(p["b"])((function(t){return s.a.debounce(t,500)})),Object(o["f"])("design:type",Function),Object(o["f"])("design:paramtypes",[]),Object(o["f"])("design:returntype",void 0)],e.prototype,"search",null),Object(o["c"])([Object(p["h"])("destroyed"),Object(o["f"])("design:type",Function),Object(o["f"])("design:paramtypes",[]),Object(o["f"])("design:returntype",void 0)],e.prototype,"_d1",null),e=Object(o["c"])([Object(p["d"])({})],e),e}(p["c"]),M=A,I=M,L=Object(D["a"])(I,S,F,!1,null,null,null),P=L.exports,z=(i("dd1f"),i("2bb6"),layui.$);function N(t,e){var i=e.ownerDocument,n=i.documentElement,r=i.defaultView,o=r.pageYOffset-n.clientTop,a=r.pageXOffset-n.clientLeft,s=t.getBoundingClientRect(),c=s.top+o-t.scrollTop,l=s.left+a-t.scrollLeft,u=e.getBoundingClientRect(),d=u.top+o-c,p=u.bottom+o-c,f=u.left+a-l,v=u.right+a-l,y=v-f,b=p-d;return{top:d,bottom:p,left:f,right:v,width:y,height:b}}function R(t,e,i){var n=t.getBoundingClientRect(),r=e.ownerDocument,o=r.documentElement,a=r.defaultView,s=a.pageYOffset-o.clientTop,c=a.pageXOffset-o.clientLeft,l=n.top+s-t.scrollTop,u=n.left+c-t.scrollLeft;return{x:i.pageX-u,y:i.pageY-l}}var V=20,J=0,U=2;function q(t,e,i){var n,r,o=R(t,e,i),a=N(t,e),s=Math.min(V,a.height/3),c=Math.min(V,a.width/3),l=0,u=0,d=0,p=0,f=J+U;if(o.y<a.top+s)n="top",r="before",d=a.width,l=a.top-f,u=a.left,p=J;else if(o.y>a.bottom-s)n="bottom",r="after",d=a.width,l=a.bottom+f,u=a.left,p=J;else if(o.x<a.left+c)n="left",r="before",d=J,l=a.top,u=a.left-f,p=a.height;else if(o.x>a.right-c)n="right",r="after",d=J,l=a.top,u=a.right+f,p=a.height;else{if(!e.classList.contains("uieditor-drag-content"))return null;n="in",r="in",d=a.width,l=a.top,u=a.left,p=a.height}return{top:l,left:u,width:d,height:p,type:n,type2:r}}function H(t,e){var i,n=z(t),r=function(t){t.stopPropagation(),t.preventDefault()},o="uieditor-drag-hide",a=n.find(".editor-json-content").first(),c=z('<div class="uieditor-drag-sel-box layui-uieditor '+o+'" />').appendTo(a),l=z('<div class="uieditor-drag-over-box layui-uieditor '+o+'" />').appendTo(a),u=z('<div class="uieditor-drag-pos-line '+o+'" />').appendTo(a),d=a[0],p=null,f="ue_drag_toolbars",v=function(t){return t==p},b=function(){p=i=null,c.removeData(f),c.addClass(o)},h=function(t,n){if(n||!v(t)&&t){p=t,x();var r=(null===e||void 0===e?void 0:e.control(M({fromEl:t})))||{},a=(null===r||void 0===r?void 0:r.title)||{},l=r.toolbars||[],u=[],b=-20;if(l&&l.length>0&&s.a.forEach(l,(function(t,e){!1!==t.show&&(u.push('<a href="javascript:void(0);" layui-tip="'+t.title+'" class="select-toolbar '+t.icon+'"\n      tIndex="'+e+'" style="right:'+b+'px" />'),b-=18)})),!1===a.show)c.html(u.join(""));else{var h=a.collapse,m=h?'<i class="container-extand-icon layui-icon '+(a.isCollapse?"layui-icon-down":"layui-icon-right")+'"></i>':"",g='<div class="title">\n      '+m+"\n      "+a.text+"\n      "+u.join("")+"\n    </div>";c.html(g),c.data("ue-collapse-fn",h)}c.data(f,l),i=null,y["a"].requestAnimationFrame(j,200),c.removeClass(o)}function j(){if(!p||p!=t)return!1;var e=N(d,t);s.a.isEqual(i,e)||(i=e,c.css({top:e.top+"px",left:e.left+"px",width:e.width+"px",height:e.height+"px"}))}};c.on("mousedown",(function(t){return r(t),!1})),c.on("mousedown","a",(function(t){var e=z(t.target),i=~~e.attr("tIndex");if(i>=0){var n=c.data(f),r=n[i];null===r||void 0===r||r.click(r,t)}})),c.on("mousedown",".container-extand-icon",(function(t){var e=c.data("ue-collapse-fn");e&&e(t)}));var m,g=function(t){return t&&(t.classList.contains("uieditor-drag-item")||t.classList.contains("uieditor-drag-content"))},j=function(t){return g(t)||g(t)?t:z(t).closest(".uieditor-drag-item,.uieditor-drag-content")[0]};function O(t,i){if(t=j(t),t){var n=t.classList.contains("uieditor-drag-root");if(n)return;if(e.canSelect&&!1===e.canSelect(M({fromEl:t,ev:i}))){var r=t.parentElement;return O(r,i)}}return t}a.on("mousedown",(function(t){b()})),a.on("mousedown",".uieditor-drag-item,.uieditor-drag-content",(function(t){var i=O(t.currentTarget,t);if(i){if(e.select&&!1===e.select(M({fromEl:i,ev:t})))return;return r(t),h(i),i.focus(),n.trigger("mousedown"),!1}}));var _,C,w=function(t){return t==m},x=function(){m=null,l.addClass(o)},k=function(t){if(!w(t))if(v(t))x();else{m=t;var i=t.classList.contains("uieditor-drag-root"),n=i?null:(null===e||void 0===e?void 0:e.control(M({fromEl:t})))||{},r=(null===n||void 0===n?void 0:n.title)||{};if(i||!1===r.show)l.html("");else{var a=r.collapse,s=a?'<i class="container-extand-icon layui-icon '+(r.isCollapse?"layui-icon-down":"layui-icon-right")+'"></i>':"",c='<div class="title">\n      '+s+"\n      "+r.text+"\n    </div>";l.html(c)}var u=N(d,t);l.css({top:u.top+"px",left:u.left+"px",width:u.width+"px",height:u.height+"px"}),l.removeClass(o)}};a.on("mouseover",".uieditor-drag-item,.uieditor-drag-content",(function(t){var e=j(t.currentTarget);if(e)return r(t),k(e),!1})),a.on("mouseleave",(function(t){x()}));var E=function(t,e,i){if(t&&(i||(i=q(d,t,e)),i)){_=i,C=t;var n=u[0],r=n.classList;r.contains("uieditor-drag-pos-line")||r.add("uieditor-drag-pos-line");var a=z(n);return a.css({top:i.top+"px",left:i.left+"px",width:i.width+"px",height:i.height+"px"}),"in"==i.type?a.addClass("pos-line-box"):a.removeClass("pos-line-box"),r.remove(o),n}},T=function(){_=C=null,D=!1;var t=u[0];t.classList.add(o)},D=!1,$=null,B=null;function S(t,e){if(!B||B!=t||!$)return!1;if(D)return!0;var i=R(d,t,e),n=A(i,$);return n&&(D=!0,$=null),n}var F=5;function A(t,e){return Math.abs(t.x-e.x)>=F||Math.abs(t.y-e.y)>=F}function M(t){return t.pos||(t.pos=_),t.$=z,t}var I=z(window);function L(t,i,n){if(t=j(t),t&&e.canMove&&!1===e.canMove(M({fromEl:t,ev:i,isTreeNode:n}))){var r=t.parentElement;return L(r,i,n)}return t}function P(t){var i=t.currentTarget,n=i.classList.contains("layui-tree-entry"),a=n?i:L(i,t,n);if(a){var s=a.classList.contains("uieditor-drag-root");if(!s){$=R(d,a,t),B=a;var c=null,l=null,u=function(t){if(r(t),S(a,t))try{if(e.dragstart&&!1===e.dragstart(M({fromEl:a,ev:t,isTreeNode:n})))return void(D=!1);a.classList.add(n?"uieditor-drag-tree-active":o),n||a.style.setProperty("display","none","important"),b()}finally{return!1}if(D){var i=R(d,a,t);if(i.y<d.scrollTop)d.scrollTop-=5;else{var s=N(d,d);i.y>s.height&&(d.scrollTop+=5)}var u=m;if(u){var p=l,f=p!=u,v=null===u||void 0===u?void 0:u.classList.contains("uieditor-drag-root"),y=q(d,u,t);if(v&&"in"!=y.type2)return;if(!f){var h=c;f=!y||!h||h.type2!=y.type2}f&&(l=u,c=y,e.dragover?!1!==e.dragover(M({fromEl:a,pos:y,toEl:u,ev:t,isTreeNode:n}))&&E(u,t,y):E(u,t,y))}}return!1},p=function(t){if(I.off("mousemove",u),I.off("mouseup",p),D){!(!e.drop||!C)&&e.drop(M({fromEl:B,toEl:C,pos:_,ev:t,isTreeNode:n}));T(),a.classList.remove(n?"uieditor-drag-tree-active":o),n||a.style.removeProperty("display")}};I.on("mousemove",u),I.on("mouseup",p)}}}return n.on("selectstart",".editor-json-content,.layui-tree",(function(t){return r(t),!1})),n.on("mousedown",".uieditor-cp-tree [data-uedrag]",P),a.on("mousedown",".uieditor-drag-item,.uieditor-drag-content",P),{select:function(t,e){t&&h(a.find("#"+t)[0],e)},unSelect:function(){b()},destroy:function(){b(),T(),x()}}}var W=function(){function t(){}return t.dragStart=function(t,e){return H(t,e)},t}();function X(t,e){var i=t.disabled;return s.a.isFunction(i)&&(i=i.call(t,{item:t,service:e})),i}function Y(t,e){var i=t.show;return s.a.isFunction(i)&&(i=i.call(t,{item:t,service:e})),!1!==i}function G(t){var e=[];return s.a.forEach(t,(function(t){!1!==t.show&&(t.divided&&e.push({type:"-"}),e.push(t),s.a.size(t.child)>0&&(t.child=G(t.child)))})),e}var K=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.leftBar={show:!0},e.rightBar={show:!0},e.current=null,e.history=null,e}return Object(o["d"])(e,t),Object.defineProperty(e.prototype,"optionEx",{get:function(){var t=u["a"].DefineOption(this.options);return u["a"].GlobalToOptions(t)},enumerable:!1,configurable:!0}),e.prototype._wOptions=function(t){if(this.service){var e=this.service.getJson();this.service.options=t,this.service.setJson(e)}},e.prototype._wJson=function(t){this.service&&this.service.setJson(t)},e.prototype._wTemplate=function(t){this.service&&this.service.setTmpl(t)},Object.defineProperty(e.prototype,"service",{get:function(){return this.$isBeingDestroyed||this._service||(this._service=new d["a"](this,this.optionEx)),this._service},enumerable:!1,configurable:!0}),e.prototype._pService=function(){return this.service},e.prototype._pUiEditor=function(){return this},e.prototype._pTheme=function(){return this.themeEx},Object.defineProperty(e.prototype,"themeEx",{get:function(){return this.theme||{}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"modes",{get:function(){return this.themeEx.modes},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"toolbar",{get:function(){return this._makeToolbarDisabled(),this.themeEx.toolBar},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasToolbar",{get:function(){return s.a.size(this.toolbar)>0},enumerable:!1,configurable:!0}),e.prototype._makeToolbarDisabled=function(){var t=this;s.a.forEach(this.themeEx.toolBar,(function(e){return e["disabledEx"]=X(e,t.service),e["showEx"]=Y(e,t.service),e}))},e.prototype.toolbarClick=function(t,e){!e.disabledEx&&e.click&&e.click({item:e,event:t,service:this.service})},e.prototype.hasMode=function(t){return!this.modes||s.a.includes(this.modes,t)},Object.defineProperty(e.prototype,"themeContextmenus",{get:function(){return this.themeEx.contextmenus},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showLeftBarTheme",{get:function(){var t;return!1!==(null===(t=this.themeEx.leftBar)||void 0===t?void 0:t.show)},enumerable:!1,configurable:!0}),e.prototype._wSLT=function(t){this.leftBar.show=!1!==t},Object.defineProperty(e.prototype,"showRightBarTheme",{get:function(){var t;return!1!==(null===(t=this.themeEx.rightBar)||void 0===t?void 0:t.show)},enumerable:!1,configurable:!0}),e.prototype._wSRT=function(t){this.rightBar.show=!1!==t},Object.defineProperty(e.prototype,"isInited",{get:function(){var t;return!!(null===(t=this.current)||void 0===t?void 0:t.json)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isDesign",{get:function(){var t=this.current;return"design"==t.mode&&!t.monacoEditorOther.show},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPreview",{get:function(){var t=this.current;return"preview"==t.mode&&!t.monacoEditorOther.show},enumerable:!1,configurable:!0}),e.prototype._initEvents=function(){var t,e=this,i=layui.$,n=layui.layer,r=i(this.$el),o=r.find(".editor-json-content"),a=r.find(".editor-json-content-in").children(),c=null,l=function(){if(e.$isBeingDestroyed||!e.current)return!1;if("design"==e.service.current.mode&&!e.current.monacoEditorOther.show){var t=a.offset(),i=a.outerHeight()-5,n=a.outerWidth();s.a.assign(t,{height:i,width:n}),e.current.caclSize||e.$nextTick((function(){return e.current.caclSize=!0})),s.a.isEqual(c,t)||(c=t,o.offset(t).width(n).height(i))}};y["a"].requestAnimationFrame(l,100),function(){var t=r.find(".editor-priview-content"),i=r.find(".editor-priview-content-in"),n=null,o=function(){if(e.$isBeingDestroyed||!e.current)return!1;if("preview"==e.service.current.mode&&!e.current.monacoEditorOther.show){var r=i.offset(),o=i.outerHeight()-15,a=i.outerWidth()-10;s.a.assign(r,{height:o,width:a}),e.current.caclSize||e.$nextTick((function(){return e.current.caclSize=!0})),s.a.isEqual(n,r)||(n=r,t.offset(r).width(a).height(o))}};y["a"].requestAnimationFrame(o,100)}(),r.click((function(){u(),e._makeToolbarDisabled()}));var u=function(){t&&(n.close(t),t=null)};r.on("mouseenter","[layui-tip]",(function(e){var r=i(e.currentTarget),o=r.attr("layui-tip");o&&(t=n.tips(o,r,{tips:~~r.attr("layui-tip-direction")||1}))})),r.on("mouseleave","[layui-tip]",(function(t){u()})),r.on("mousedown","[layui-tip]",(function(t){u()})),r.on("selectstart",".layui-tab-title,.tool-bar",(function(t){return t.stopPropagation(),t.preventDefault(),!1}))},e.prototype._mounted1=function(){return Object(o["b"])(this,void 0,void 0,(function(){var t,e,i,n=this;return Object(o["e"])(this,(function(r){switch(r.label){case 0:return t=this.optionEx||{},[4,c["a"].init({bable:!1!==t.babel})];case 1:return r.sent(),e=this.service,this.current=e.current,this.history=e.history,this.json?[4,e.setJson(this.json)]:[3,3];case 2:return r.sent(),[3,5];case 3:return this.tmpl?[4,e.setTmpl(this.tmpl)]:[3,5];case 4:r.sent(),r.label=5;case 5:return[4,this.$nextTick()];case 6:return r.sent(),this.keys(),this._initEvents(),layui.$(this.$el).on("click",".tool-bar, .editor-json-content, .uieditor-mode-title",(function(t){n.service.foucs()})),this.$on("on-refesh-select-box",(function(t){t.service;var e=t.id;i.select(e)})),this.$on("on-set-json",(function(t){var e=t.service;t.json;i.select(e.current.id),n.contextmenu()})),this.$on("on-change-mode",(function(t){t.service;var e=t.mode;t.oldMode;"design"!=e&&i.unSelect()})),i=this._drager=W.dragStart(this.$el,{canSelect:function(t){var e=t.isTreeNode,i=t.fromEl;if(e)return!0;var r=i.id;return!!n.service.canSelect(r)&&void 0},select:function(t){var e=t.fromEl,i=e.id;n.service.setCurrent(i)},canMove:function(t){var e=t.isTreeNode,i=t.fromEl;if(e)return!0;var r=i.id;return!!n.service.canMove(r,"","in")&&void 0},dragstart:function(t){return!0},dragover:function(t){var e=t.$,i=t.isTreeNode,r=t.fromEl,o=t.toEl,a=t.pos;if(!a)return!1;if(i){var s=e(r).data("id"),c=o.id;if(!n.service.canAddByDrag(s,c,a.type2))return!1}else{var l=r.id,u=o.id;if(!n.service.canMove(l,u,a.type2))return!1}return!0},drop:function(t){var e=t.$,i=t.isTreeNode,r=t.fromEl,o=t.toEl,a=t.pos;if(!a)return!1;if(i){var s=e(r).data("id"),c=o.id;if(!n.service.canAddByDrag(s,c,a.type2))return!1;n.service.addByDrag(s,c,a.type2)}else{var l=r.id,u=o.id;if(!n.service.canMove(l,u,a.type2))return!1;n.service.move(l,u,a.type2)}return!0},control:function(t){var i,r=t.fromEl,a=null===r||void 0===r?void 0:r.id;if(a){var s=n.service.getRenderItem(a);if(s){var c,l=s.editor,u=s.attrs,d=null===(i=s.editor)||void 0===i?void 0:i.textFormat(l,u),p=!1;l.base&&!l.collapse||(p=n.service.isCollapse(s),c=function(t){n.service.collapse(s,!p)});var f=null===l||void 0===l?void 0:l.toolbar,v=!p&&f&&f({render:s,service:e,attrs:null===s||void 0===s?void 0:s.attrs,editor:l})||[],y=e.isLocked(s),b={title:{collapse:c,text:d,show:!0,isCollapse:p},toolbars:Object(o["g"])(v,[{title:y?"解锁":"锁定",icon:"layui-icon "+(y?"layui-icon-key":"layui-icon-password"),show:!p&&!!c,click:function(){n.service.locked(a,!y)}},{title:"复制",icon:"layui-icon layui-icon-file-b",show:e.canCopy(a),click:function(){n.service.copyCurToNext()}},{title:"删除",icon:"layui-icon layui-icon-close",show:e.canRemove(a),click:function(){n.service.delCur(!1)}}])};return b}}}}),this.contextmenu(),this.$emit("on-ready",{service:e}),[2]}}))}))},e.prototype.contextmenuFn=function(){var t=this,e=this.service,i=e.canPaste,n=e.getCurRender(),r=null===n||void 0===n?void 0:n.editor,a=null===r||void 0===r?void 0:r.contextmenu,c=a&&a({render:n,service:e,attrs:null===n||void 0===n?void 0:n.attrs,editor:r})||[],l=this.themeContextmenus,u=l&&l({render:n,service:e,parent:e.getParentRenderItem(n),editor:r})||[];s.a.size(c)>0&&s.a.size(u)>0&&(s.a.first(u).divided=!0);var d=Object(o["g"])(c,u),p=Object(o["g"])(d,[{title:"Tmpl",divided:s.a.size(d)>0,disabled:!n,click:function(e){t.service.setModeUI("tmpl",!0)}},{title:"JSON",disabled:!n,click:function(e){t.service.setModeUI("json",!0)}},{title:"复 制",divided:!0,disabled:!n,click:function(e){t.service.copyCur()}},{title:"剪 切",disabled:!n,click:function(e){t.service.cutCur()}},{title:"粘 贴",disabled:!i,click:function(e){t.service.pasteCur()}},{title:"粘贴到...",disabled:!i||!n,child:[{title:"前 面",disabled:!i||!n,click:function(e){t.service.pasteCur("before")}},{title:"后 面",disabled:!i||!n,click:function(e){t.service.pasteCur("after")}},{title:"子节点",disabled:!i||!n||!r.container,click:function(e){t.service.pasteCur("child")}}]},{title:"删 除",disabled:!n,divided:!0,click:function(e){t.service.delCur()}}]);return G(p)},e.prototype.contextmenu=function(){var t=this;this._contextMenuDD1||(this._contextMenuDD1=layui.dropdown.render({elem:".uieditor-drag-sel-box",trigger:"contextmenu",isAllowSpread:!1,id:"ue-cxtmenu-"+l["a"].makeAutoId(),data:function(e){return t.contextmenuFn()},click:function(t,e){t.disabled||null===t||void 0===t||t.click(t,e)}})),this._contextMenuDD2&&this._contextMenuDD2.destroy(),this._contextMenuDD2=layui.dropdown.render({elem:".uieditor-drag-item,.uieditor-drag-content",trigger:"contextmenu",isAllowSpread:!1,id:"ue-cxtmenu-"+l["a"].makeAutoId(),data:function(e){return t.contextmenuFn()},click:function(t,e){t.disabled||null===t||void 0===t||t.click(t,e)}})},e.prototype.keys=function(){var t=this,e=layui.$(this.$el).find(".editor-json-content");e.keyup((function(e){if("design"==t.service.current.mode&&!1!==t.$isRouteActived&&!t.$isDestroyed){var i=!1,n=e.keyCode;if(e.ctrlKey)switch(n){case 67:t.service.copyCur(),i=!0;break;case 88:t.service.cutCur(),i=!0;break;case 86:t.service.pasteCur(),i=!0;break;case 90:t.service.history.pre(),i=!0;break;case 89:t.service.history.next(),i=!0;break}else switch(n){case 46:t.service.delCur(!1),i=!0;break;case 37:t.service.selectParent(),i=!0;break;case 38:t.service.selectPre(),i=!0;break;case 39:t.service.selectChild(),i=!0;break;case 40:t.service.selectNext(),i=!0;break}return i?(t.$refs.jsonFoucs["focus"](),e.stopPropagation(),e.preventDefault(),!1):void 0}}))},e.prototype.about=function(){return Object(o["b"])(this,void 0,void 0,(function(){var t,e,i;return Object(o["e"])(this,(function(n){switch(n.label){case 0:return t=this.themeEx,t.about?[3,1]:(i='<a href="https://gitee.com/days2020/vue-uieditor" target="_blank">'+"vue-uieditor".toUpperCase()+" 1.0.3 (2021)</a><div>VUE 可视化编辑器（Vue 2.x）</div>",[3,3]);case 1:return[4,t.about({service:this.service})];case 2:i=n.sent(),n.label=3;case 3:return e=i,y["a"].alert(e,{title:"关于"}),[2]}}))}))},e.prototype._destroyed1=function(){var t,e,i,n;null===(t=this._contextMenuDD1)||void 0===t||t.destroy(),null===(e=this._contextMenuDD2)||void 0===e||e.destroy(),null===(i=this._drager)||void 0===i||i.destroy(),null===(n=this._service)||void 0===n||n._destroy(),this._service=this._drager=this._contextMenuDD1=this._contextMenuDD2=this.current=null,b["a"].destroy(this.$el)},Object(o["c"])([Object(p["i"])(),Object(o["f"])("design:type",Object)],e.prototype,"options",void 0),Object(o["c"])([Object(p["l"])("optionEx"),Object(o["f"])("design:type",Function),Object(o["f"])("design:paramtypes",[Object]),Object(o["f"])("design:returntype",void 0)],e.prototype,"_wOptions",null),Object(o["c"])([Object(p["i"])(),Object(o["f"])("design:type",Object)],e.prototype,"json",void 0),Object(o["c"])([Object(p["l"])("json"),Object(o["f"])("design:type",Function),Object(o["f"])("design:paramtypes",[Object]),Object(o["f"])("design:returntype",void 0)],e.prototype,"_wJson",null),Object(o["c"])([Object(p["i"])(),Object(o["f"])("design:type",String)],e.prototype,"tmpl",void 0),Object(o["c"])([Object(p["l"])("tmpl"),Object(o["f"])("design:type",Function),Object(o["f"])("design:paramtypes",[Object]),Object(o["f"])("design:returntype",void 0)],e.prototype,"_wTemplate",null),Object(o["c"])([Object(p["j"])("service"),Object(o["f"])("design:type",Function),Object(o["f"])("design:paramtypes",[]),Object(o["f"])("design:returntype",void 0)],e.prototype,"_pService",null),Object(o["c"])([Object(p["j"])("uieditor"),Object(o["f"])("design:type",Function),Object(o["f"])("design:paramtypes",[]),Object(o["f"])("design:returntype",void 0)],e.prototype,"_pUiEditor",null),Object(o["c"])([Object(p["j"])("theme"),Object(o["f"])("design:type",Function),Object(o["f"])("design:paramtypes",[]),Object(o["f"])("design:returntype",void 0)],e.prototype,"_pTheme",null),Object(o["c"])([Object(p["i"])(),Object(o["f"])("design:type",Object)],e.prototype,"theme",void 0),Object(o["c"])([Object(p["l"])("showLeftBarTheme",{immediate:!0}),Object(o["f"])("design:type",Function),Object(o["f"])("design:paramtypes",[Object]),Object(o["f"])("design:returntype",void 0)],e.prototype,"_wSLT",null),Object(o["c"])([Object(p["l"])("showRightBarTheme",{immediate:!0}),Object(o["f"])("design:type",Function),Object(o["f"])("design:paramtypes",[Object]),Object(o["f"])("design:returntype",void 0)],e.prototype,"_wSRT",null),Object(o["c"])([Object(p["h"])("mounted"),Object(o["f"])("design:type",Function),Object(o["f"])("design:paramtypes",[]),Object(o["f"])("design:returntype",Promise)],e.prototype,"_mounted1",null),Object(o["c"])([Object(p["h"])("destroyed"),Object(o["f"])("design:type",Function),Object(o["f"])("design:paramtypes",[]),Object(o["f"])("design:returntype",void 0)],e.prototype,"_destroyed1",null),e=Object(o["c"])([Object(p["d"])({components:{"uieditor-cp-tree":P,"uieditor-cp-attr":B}})],e),e}(p["c"]),Z=K,Q=Z,tt=Object(D["a"])(Q,n,r,!1,null,null,null);e["default"]=tt.exports},"039e":function(t,e,i){"use strict";i("d2b5")},"40b1":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"uieditor-monaco-editor",class:{"uieditor-monaco-editor-focus":t.isFocus},style:t.style},[i("iframe",{staticClass:"uieditor-monaco-editor-iframe",attrs:{id:t.id,frameborder:"0"}})])},r=[],o=i("9ab4"),a=i("60bb"),s=i.n(a),c=i("532a"),l=i("42c9"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.id="",e.content="",e.content_bak="",e.isFocus=!1,e._isInited=!1,e}return Object(o["d"])(e,t),Object.defineProperty(e.prototype,"style",{get:function(){var t=this.width;t=/^[0-9]+$/.test(t)?t+"px":t;var e=this.height;return e=/^[0-9]+$/.test(e)?e+"px":e,{width:t,height:e}},enumerable:!1,configurable:!0}),e.prototype._wContent=function(t){t!=this.content_bak&&(this.content_bak=t,this.editor&&this.editor.getModel().setValue(t))},e.prototype.formatCode=function(){return Object(o["b"])(this,void 0,void 0,(function(){var t;return Object(o["e"])(this,(function(e){switch(e.label){case 0:return this.editor?[4,this.editor.getAction("editor.action.formatDocument").run()]:[3,6];case 1:if(e.sent(),this._isFormatInit)return[3,6];this._isFormatInit=!0,t=0,e.label=2;case 2:return t<15?[4,c["a"].pause(30)]:[3,6];case 3:return e.sent(),[4,this.formatCode()];case 4:e.sent(),e.label=5;case 5:return t++,[3,2];case 6:return[2]}}))}))},e.prototype._created1=function(){this.id="uieditor-monaco-editor_"+c["a"].makeAutoId()},e.prototype._mounted1=function(){this.iframe=document.getElementById(this.id),this._wIFrame()},Object.defineProperty(e.prototype,"optionEx",{get:function(){var t=s.a.assign({language:this.language||"javascript",selectOnLineNumbers:!0,readOnly:!1,scrollbar:{useShadows:!1,vertical:"visible",horizontal:"visible",horizontalSliderSize:5,verticalSliderSize:5,horizontalScrollbarSize:15,verticalScrollbarSize:15},modelSetting:{indentSize:2,insertSpaces:!0,tabSize:2,trimAutoWhitespace:!0},minimap:{enabled:!0,showSlider:"always",maxColumn:60},extraLib:this.extraLib||""},s.a.cloneDeep(this.option));return t},enumerable:!1,configurable:!0}),e.prototype._wIFrame=function(){var t=this.iframe;if(!this._isInited&&t){this._isInited=!0;var e=this;t.onBeforeInit=function(i,n){t.onBeforeInit=null,s.a.assign(n,e.optionEx),n.value=e.content,e.$emit("on-before-init",{monaco:i,option:n})},t.onInited=function(i){e.editor=i,t.onInited=null,e.$emit("on-inited",{editor:i})},t.onChanged=function(t,i,n){e.content=e.content_bak=i,e.$emit("on-changed",{editor:t,content:i,e:n})},t.onBlured=function(t,i){e.content=e.content_bak=i,e.isFocus=!1,e.$emit("on-blured",{editor:t,content:i})},t.onFocused=function(t,i){e.isFocus=!0,e.$emit("on-focused",{editor:t,content:i})},t.onReady=function(t,i){e.formatAuto&&e.formatCode(),e.$emit("on-ready",{editor:t,content:i})},t.onDestory=function(i,n){t.onDestory=t.onChanged=t.onReady=t.onBlured=t.onResized=null,e.$emit("on-destory",{monaco:i,editor:n})};var i=this.id;t["src"]="./vue-uieditor/assets/editor/editor.html?id="+i}},e.prototype._destroy1=function(){this.iframe=this.editor=null},Object(o["c"])([Object(l["i"])({type:String,default:"100%"}),Object(o["f"])("design:type",String)],e.prototype,"width",void 0),Object(o["c"])([Object(l["i"])({type:String,default:"100%"}),Object(o["f"])("design:type",String)],e.prototype,"height",void 0),Object(o["c"])([Object(l["i"])({type:Boolean,default:!1}),Object(o["f"])("design:type",Boolean)],e.prototype,"formatAuto",void 0),Object(o["c"])([Object(l["i"])({type:String,default:"javascript"}),Object(o["f"])("design:type",String)],e.prototype,"language",void 0),Object(o["c"])([Object(l["i"])({type:String,default:""}),Object(o["f"])("design:type",String)],e.prototype,"extraLib",void 0),Object(o["c"])([Object(l["i"])(Object),Object(o["f"])("design:type",Object)],e.prototype,"option",void 0),Object(o["c"])([Object(l["k"])(),Object(o["f"])("design:type",String)],e.prototype,"content",void 0),Object(o["c"])([Object(l["l"])("content"),Object(l["b"])((function(t){return s.a.debounce(t,200)})),Object(o["f"])("design:type",Function),Object(o["f"])("design:paramtypes",[Object]),Object(o["f"])("design:returntype",void 0)],e.prototype,"_wContent",null),Object(o["c"])([Object(l["h"])("created"),Object(o["f"])("design:type",Function),Object(o["f"])("design:paramtypes",[]),Object(o["f"])("design:returntype",void 0)],e.prototype,"_created1",null),Object(o["c"])([Object(l["h"])("mounted"),Object(o["f"])("design:type",Function),Object(o["f"])("design:paramtypes",[]),Object(o["f"])("design:returntype",void 0)],e.prototype,"_mounted1",null),Object(o["c"])([Object(l["h"])("beforeDestroy"),Object(o["f"])("design:type",Function),Object(o["f"])("design:paramtypes",[]),Object(o["f"])("design:returntype",void 0)],e.prototype,"_destroy1",null),e=Object(o["c"])([Object(l["d"])({})],e),e}(l["c"]),d=u,p=d,f=(i("039e"),i("2877")),v=Object(f["a"])(p,n,r,!1,null,null,null);e["default"]=v.exports},d2b5:function(t,e,i){}}]);